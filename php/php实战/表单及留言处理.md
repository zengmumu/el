# PHP 留言板留言表单及留言处理

## 留言表单

留言板的留言表单位于 index.php 页面的下面部分，在显示完当前页的留言信息后显示留言表单以供来访用户输入并提交留言：

    
    
    <form id="form1" name="form1" method="post" action="submiting.php">
    <h3>发表留言</h3>
    <p>
    <label for="title">昵&nbsp;&nbsp;&nbsp;&nbsp;称:</label>
    <input id="nickname" name="nickname" type="text" /><span>(必须填写，不超过16个字符串)</span>
    </p>
    <p>
    <label for="title">电子邮件:</label>
    <input id="email" name="email" type="text" /><span>(非必须，不超过60个字符串)</span>
    </p>
    <p>
    <label for="title">留言内容:</label>
    <textarea id="content" name="content" cols="50" rows="8" ></textarea>
    </p>
    <input type="submit" name="submit" value="  确 定  " />
    </form>
    

### 留言信息写入数据表

当留言信息处理完毕之后，可将数据写入对应的留言表：

    
    
    // 数据写入库表
    require("./conn.php");
    // 获取页面数据
	$nickname = $_POST["nickname"];
	$email = $_POST["email"];
	$content = $_POST["content"];
	$createtime=time();
    $insert_sql = "INSERT INTO guestbook(nickname,email,content,createtime)VALUES('$nickname','$email','$content',$createtime)";
    
    if(mysql_query($insert_sql)){
    ?>
    <!DOCTYPE html>
    <html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="Refresh" content="2;url=index.php">
    <title>留言成功</title>
    </head>
    <body>
    <p>
    留言成功！非常感谢您的留言。<br />请稍后，页面正在返回...
    </p>
    </body>
    </html>
    <?php
    } else {
        echo '留言失败：',mysql_error(),'[ <a href="javascript:history.back()">返 回</a> ]';
    }
    ?>
    

这里是很普通的 [mysql_query](http://www.5idev.com/p-php_mysql_query.shtml)
函数数据写入操作。由于写入成功后要使用 [html meta](http://www.5idev.com/p-xhtml_head_meta.shtml)
的 Refresh 属性自动转向至留言主界面，因此在两段 PHP 代码间插入了 html 代码。

至此，整个 PHP 留言板程序的前台用户留言及展示部分已经完成。
