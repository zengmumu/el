# jQuery中的事件
作者：曾庆林
### 事件初探
加载文档完成触发：`$(document).ready(function(){})`  
事件可以多次执行。   
代码可以简写：`$(function(){})`



### 事件绑定
1  可以之间添加事件函数
```
  $("h1").click(function(){
        //触发事件要做的事情
  })
```
> 问题是：  
>1. 每次单击h1都会相应事件，不能解除。  
>2. 这个里面的函数也不能复用
>3. 只能绑定一个函数


2 可以通过绑定事件  
- bind() 绑定事件
- unbind() 解绑事件
- one() 只执行一次

js
```
$(".box").bind("click",fn1);
$(".box").bind("click",fn2);
// 可以绑定多个
function fn1(){
	alert("你敢点我，我不是你的菜");
}
function fn2(){
	alert("我就是去问问老朋友");
}
$("button").bind("click",fn3);
function fn3(){
	alert("你点我了，就不要找那个她！");
	$(".box").unbind("click");
	// 在这里 解绑的 .box 所有click 事件  
	
	/* 也可以只解绑一个一个事件如：
	 $(".box").unbind("click"，fn1);   
	*/
}

$(".box").one("click",function(){
    alert("我只出现一次，以后不烦你了");
})


```
html

```
<div class="box">box</div>
<button>我是米米</button>
```

---
### on 方法
## 实例

向 &lt;p&gt; 元素添加 click 事件处理程序：
```
$(function(){ 
    $("p").on("click",function(){ alert("段落被点击了。")}); 
});
```
## 定义和用法

on() 方法在被选元素及子元素上添加一个或多个事件处理程序。

自 jQuery 版本 1.7 起，on() 方法是 bind()、live() 和 delegate() 方法的新的替代品。该方法给 API
带来很多便利，我们推荐使用该方法，它简化了 jQuery 代码库。

## 语法
```
$( _selector_ ).on( _event,childSelector,data,function_ )
```
  
参数 | 描述  
---|---  
_event_ | 必需。规定要从被选元素移除的一个或多个事件或命名空间。  
_childSelector_ | 可选。规定只能添加到指定的子元素上的事件处理程序（且不是选择器本身，比如已废弃的 delegate() 方法）。  
_data_ | 可选。规定传递到函数的额外数据。  
_function_ | 可选。规定当事件发生时运行的函数。  

 **on() 和 click() 的区别:**

二者在绑定静态控件时没有区别，但是如果面对动态产生的控件，只有 on() 能成功的绑定到动态控件中。

以下实例中原先的 HTML 元素点击其身后的 Delete 按钮就会被删除。而动态添加的 HTML 元素，使用 click() 这种写法，点击 Delete
按钮无法删除；使用 on() 方式可以。
```
<script src="https://cdn.staticfile.org/jquery/2.2.4/jquery.min.js"></script>

<h1>on()和click()的区别</h1>

<p>
	<span>点击生成新按钮。新On生成的Delete按钮行为用on()实现，新Click生成的Delete按钮行为用click()实现。</span>
</p>
<div class="test">
	<button class="new" id="newon">新On</button> 
	<button class="new" id="newclick">新Click</button>
	<ul class="li"> 
		<li>原先的HTML元素on<button class="deleteon">Delete</button></li> 
		<li>原先的HTML元素click<button class="deleteclick">Delete</button></li> 
	</ul> 
</div>
```
js
```
$("#newclick").click(function(){ 
	$(".li").append('<li>动态添加的HTML元素click<button class="deleteclick">Delete</button></li>'); 
});
$("#newon").click(function(){ 
	$(".li").append('<li>动态添加的HTML元素on<button class="deleteon">Delete</button></li>'); 
});
$(".delete").click(function(){ 
	$(this).parent().remove(); 
}); 

$(".li").on('click', ".deleteon", function(){
	$(this).parent().remove(); 
})
$(".deleteclick").click(function(){ 
	$(this).parent().remove(); 
});
```

### 合成事件

hover(enter,leave)
用于模拟光标悬停事件.当光标移动到元素上时,会触发指定的第一个函数,当光标移出这个元素时,触发指定的第二个函数.

```
$("h1").hover(
    function(){// mouseover触法},
    function(){// mouseout触发}
)
```

---

### 模拟事件
trigger

事件都是通过用户执行相应的操作后触发的。有时我们更希望让事件自动执行，而不用手动触发，或者在一个事件中调用另一个事件的处理函数。这时我们可以考虑使用模拟操作。  
模拟操作可以使用`trigger()`方法来完成。

html
```
<p>this is a p</p>
<form action="">
	<input type="text" id="good" />
	<input type="text" />
</form>
```
js
```
$(function(){
	$("p").click(function(){ alert("我被点击了")});
	$("p").trigger("click");
	$("#good").trigger("focus");
	// trigger 可以模拟自动获得焦点
})
```

---

### 阻止事件冒泡的方法

在绑定的事件中加入event参数，并在函数中增加event.stopPropagation()调用就可以阻止事件冒泡。也可以使用return false阻止冒泡。

event中还有一个方法：event.preventDefault();作用是阻止默认行为，如表单提交！

![image](http://note.youdao.com/yws/public/resource/a8b3e71b5675cf56855aad5b3612a51e/xmlnote/A01D809D62D1474482E9DD18825E96BA/2679)

html
```
<div class="papa">
		父亲
	<div class="self">
		自己
		<div class="son">儿子<span>this is 核心</span><a href="http://www.baidu.com">BAIDU</a></div>
	</div>
</div>
```
>我们在papa 上面绑定一个事件  
>在span 也绑定一个事件
>单击span 时候 papa也会触发单击事件（事件会从子元素传递到父辈元素上面）
>怎么样阻止事件的默认向上冒泡传递呢?

> a 会默认 跳转页面，怎样阻止默认挑战页面呢？
```
$("span").bind("click",fn1);
$(".papa").bind("click",fn2);

function fn1(e){
	alert("我是小span的被点击了");
	e.stopPropagation();//阻止事件冒泡
}
function fn2(){
	alert("我是papa被点击了");
	
	
}
$("a").bind("click",fn3);

function fn3(e){
	alert("A被单击了");
	e.preventDefault();//阻止默认事件
	
}
	

```



